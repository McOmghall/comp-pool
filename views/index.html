<html>
<head>
<title>Compool root</title>
<meta charset="UTF-8">
<script
	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.0/angular.min.js"></script>
<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
<script type="text/javascript">
		var app = angular.module("MyApp", []);

		app.controller("JobsCtrl", function($scope, $http) {
		    $scope.variables = [];
  			$http.get('./jobs/hash-of-hashes').
    		then(function(data) {
	      		$scope.job = data.data;
	      			
	  			return $http.get('./jobs/hash-of-hashes/variables/1')
    		}).then(function(data) {
    			$scope.variables.push(data.data);
    		}).then(function() {
    			var funct = $scope.job.execute_function;
    			$scope.funct = new Function("variable, context", funct);
    			$scope.variables[$scope.variables.length - 1]
    				.result = $scope.funct.call(null, $scope.variables[$scope.variables.length - 1], {}).toString(16);
    		}).then(function() {
    			for (var i = 0; i < 1000; i++) {
	    			var result = $scope.variables[$scope.variables.length - 1].result;
	    			$scope.variables.push({hash: result});
	    			$scope.variables[$scope.variables.length - 1]
	    				.result = $scope.funct.call(null, $scope.variables[$scope.variables.length - 1], {}).toString(16);
	    		}
    		});;
		});
	</script>
<style>
.background-astano {
	background-image:
		url('http://setedous.com/wp-content/uploads/2014/09/PÃ³rtico-Astano-2.jpg');
	background-size: 100%;
}

.title-colored {
	color: #0B1B42;
}
</style>
</head>
<body class="background-astano">
	<div class="row container">
		<h1 class="title-colored">Semprebeta</h1>
	</div>
	<div class="panel panel-default col-md-3 col-md-offset-1"
		ng-app="MyApp" ng-controller="JobsCtrl">
		<div class="panel-heading">
			<h3 class="panel-title">Computing jobs</h3>
		</div>
		<div class="panel-body text-center">
			<div>{{job.name}}: {{job.metadata.description.en}}</div>
			<div ng-repeat="variable in variables">
				<span class="col-md-5"> {{variable.hash}} </span> 
				<span class="col-md-2"> -> </span> 
				<span class="col-md-5"> {{variable.result}} </span>
			</div>
		</div>
	</div>
</body>
</html>
